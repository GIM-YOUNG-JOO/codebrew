<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.mycompany.codebrew.dao.BoardDao">

	<!-- <insert id="insert" parameterType="Board">
			<selectKey keyProperty="boId" order="BEFORE" resultType="int">
			
			select seq_boid.nextval from dual
			</selectKey>
		
		insert into board(boid, acid, botitle, bocontent, bodate, bonewdate, bohitcount, bcid, boattachdata)
		values(#{boId}, #{acId}, #{boTitle}, #{boContent}, sysdate, sysdate, #{boHitcount}, #{bcId} ,#{boAttachdata})
		
	</insert> -->
	<insert id="insert" parameterType="Board">
		<selectKey keyProperty="boId" order="BEFORE" resultType="int">
			select seq_boid.nextval from dual
		</selectKey>
		insert into board(boid, acid, botitle, bocontent, bodate, bonewdate, bohitcount, bcid, boattachdata)
		values(#{boId}, #{acId}, #{boTitle}, #{boContent}, sysdate, sysdate, #{boHitcount}, #{bcId} ,#{boAttachdata})
	</insert>
	
	<select id="count" resultType="int">
		select count(*) from board
	</select>
	
	<select id="selectByPage" parameterType="Pager" resultType="Board">
	<!-- parameterType은 전달되는 매개변수를 말함, 한 행에 대한 resultType을 적어야함 -->
	<![CDATA[
	select rnum, boid, acid, botitle, bocontent, bodate, bonewdate, bohitcount, bcid, boattachdata
		from(
			select rownum as rnum, boid, acid, botitle, bocontent, bodate, bonewdate, bohitcount, bcid, boattachdata
			from(
				select boid, acid, botitle, bocontent, bodate, bonewdate, bohitcount, bcid, boattachdata
				from board
				order by boid desc
			)
			where rownum <= #{endRowNo}
		)
	where rnum >= #{startRowNo}
	]]>
	</select>
	
	<select id="selectByDate" resultType="Board">
		select boid, acid, botitle, bocontent, bodate, bonewdate, bohitcount, bcid, bolike 
		from board
		order by bonewdate desc
	</select>
	
	<select id="selectByDateWithTitle" parameterType="String" resultType="Board">
		select boid, acid, botitle, bocontent, bodate, bonewdate, bohitcount, bcid, bolike
		from board
		where botitle like '%' || #{searchText} || '%'
		order by bonewdate desc
	</select>
	
	<select id="selectByHitcount" resultType="Board">
		select boid, acid, botitle, bocontent, bodate, bonewdate, bohitcount, bcid, bolike 
		from board
		order by bohitcount desc
	</select>
	
	<select id="selectByHitcountWithTitle" parameterType="String" resultType="Board">
		select boid, acid, botitle, bocontent, bodate, bonewdate, bohitcount, bcid, bolike
		from board
		where botitle like '%' || #{searchText} || '%'
		order by bohitcount desc
	</select>
	
	<select id="selectByLike" resultType="Board">
		select boid, acid, botitle, bocontent, bodate, bonewdate, bohitcount, bcid, bolike 
		from board
		order by boLike desc
	</select>
	
	<select id="selectByLikeWithTitle" parameterType="String" resultType="Board">
		select boid, acid, botitle, bocontent, bodate, bonewdate, bohitcount, bcid, bolike
		from board
		where botitle like '%' || #{searchText} || '%'
		order by bolike desc
	</select>
	
	<select id="selectByTitle" parameterType="String" resultType="Board">
		select boid, acid, botitle, bocontent, bodate, bonewdate, bohitcount, bcid, bolike
		from board
		where botitle like '%' || #{searchText} || '%'
	</select>
	 
</mapper>